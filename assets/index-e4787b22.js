!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q={exports:{}};q.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r,o;function i(e){return["image/png","image/jpeg","image/gif"].some((t=>t===e))}n.r(t),n.d(t,"canvastoDataURL",(function(){return c})),n.d(t,"canvastoFile",(function(){return u})),n.d(t,"dataURLtoFile",(function(){return l})),n.d(t,"dataURLtoImage",(function(){return d})),n.d(t,"downloadFile",(function(){return f})),n.d(t,"filetoDataURL",(function(){return h})),n.d(t,"imagetoCanvas",(function(){return g})),n.d(t,"urltoBlob",(function(){return m})),n.d(t,"urltoImage",(function(){return p})),n.d(t,"compress",(function(){return b})),n.d(t,"compressAccurately",(function(){return v})),n.d(t,"EImageType",(function(){return r})),(o=r||(r={})).PNG="image/png",o.JPEG="image/jpeg",o.GIF="image/gif";var a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))};function c(e,t=.92,n=r.JPEG){return a(this,void 0,void 0,(function*(){return i(n)||(n=r.JPEG),e.toDataURL(n,t)}))}function u(e,t=.92,n=r.JPEG){return new Promise((r=>e.toBlob((e=>r(e)),n,t)))}var s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))};function l(e,t){return s(this,void 0,void 0,(function*(){const n=e.split(",");let r=n[0].match(/:(.*?);/)[1];const o=atob(n[1]);let a=o.length;const c=new Uint8Array(a);for(;a--;)c[a]=o.charCodeAt(a);return i(t)&&(r=t),new Blob([c],{type:r})}))}function d(e){return new Promise(((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=()=>n(new Error("dataURLtoImage(): dataURL is illegal")),r.src=e}))}function f(e,t){const n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=t||Date.now().toString(36),document.body.appendChild(n);const r=document.createEvent("MouseEvents");r.initEvent("click",!1,!1),n.dispatchEvent(r),document.body.removeChild(n)}function h(e){return new Promise((t=>{const n=new FileReader;n.onloadend=e=>t(e.target.result),n.readAsDataURL(e)}))}var y=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))};function g(e,t={}){return y(this,void 0,void 0,(function*(){const n=Object.assign({},t),r=document.createElement("canvas"),o=r.getContext("2d");let i,a;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e]=Number(n[e]));if(n.scale){const t=n.scale>0&&n.scale<10?n.scale:1;a=e.width*t,i=e.height*t}else a=n.width||n.height*e.width/e.height||e.width,i=n.height||n.width*e.height/e.width||e.height;switch([5,6,7,8].some((e=>e===n.orientation))?(r.height=a,r.width=i):(r.height=i,r.width=a),n.orientation){case 3:o.rotate(180*Math.PI/180),o.drawImage(e,-r.width,-r.height,r.width,r.height);break;case 6:o.rotate(90*Math.PI/180),o.drawImage(e,0,-r.width,r.height,r.width);break;case 8:o.rotate(270*Math.PI/180),o.drawImage(e,-r.height,0,r.height,r.width);break;case 2:o.translate(r.width,0),o.scale(-1,1),o.drawImage(e,0,0,r.width,r.height);break;case 4:o.translate(r.width,0),o.scale(-1,1),o.rotate(180*Math.PI/180),o.drawImage(e,-r.width,-r.height,r.width,r.height);break;case 5:o.translate(r.width,0),o.scale(-1,1),o.rotate(90*Math.PI/180),o.drawImage(e,0,-r.width,r.height,r.width);break;case 7:o.translate(r.width,0),o.scale(-1,1),o.rotate(270*Math.PI/180),o.drawImage(e,-r.height,0,r.height,r.width);break;default:o.drawImage(e,0,0,r.width,r.height)}return r}))}function m(e){return fetch(e).then((e=>e.blob()))}function p(e){return new Promise(((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=()=>n(new Error("urltoImage(): Image failed to load, please check the image URL")),r.src=e}))}var w=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))};function b(e,t={}){return w(this,void 0,void 0,(function*(){if(!(e instanceof Blob))throw new Error("compress(): First arg must be a Blob object or a File object.");if("object"!=typeof t&&(t=Object.assign({quality:t})),t.quality=Number(t.quality),Number.isNaN(t.quality))return e;const n=yield h(e);let o=n.split(",")[0].match(/:(.*?);/)[1],a=r.JPEG;i(t.type)&&(a=t.type,o=t.type);const u=yield d(n),s=yield g(u,Object.assign({},t)),f=yield c(s,t.quality,a),y=yield l(f,o);return y.size>e.size?e:y}))}function v(e,t={}){return w(this,void 0,void 0,(function*(){if(!(e instanceof Blob))throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");if("object"!=typeof t&&(t=Object.assign({size:t})),t.size=Number(t.size),Number.isNaN(t.size)||1024*t.size>e.size)return e;t.accuracy=Number(t.accuracy),(!t.accuracy||t.accuracy<.8||t.accuracy>.99)&&(t.accuracy=.95);const n=t.size*(2-t.accuracy)*1024,o=1024*t.size,a=t.size*t.accuracy*1024,u=yield h(e);let s=u.split(",")[0].match(/:(.*?);/)[1],f=r.JPEG;i(t.type)&&(f=t.type,s=t.type);const y=yield d(u),m=yield g(y,Object.assign({},t));let p,w=.5;const b=[null,null];for(let e=1;e<=7;e++){p=yield c(m,w,f);const t=.75*p.length;if(7===e){(n<t||a>t)&&(p=[p,...b].filter((e=>e)).sort(((e,t)=>Math.abs(.75*e.length-o)-Math.abs(.75*t.length-o)))[0]);break}if(n<t)b[1]=p,w-=Math.pow(.5,e+1);else{if(!(a>t))break;b[0]=p,w+=Math.pow(.5,e+1)}}const v=yield l(p,s);return v.size>e.size?e:v}))}}]);var V=q.exports,B=V;const G=document.querySelector("input"),j=document.querySelector("a"),F=document.getElementById("status");G&&(G.onchange=async e=>{var t;if(!(j&&F&&e.target instanceof HTMLInputElement))return;const n=e.target;if(null==(t=n.files)||!t.length)return;j.style.display="none",F.style.display="";const r=n.files[0],o=await T(r),i=await X(o),a=r.name.split(".").slice(0,-1).join("."),c=o.size!==r.size,u=c?a+"-min":a,s=c?"jpg":r.name.split(".").at(-1);j.href=i,F.style.display="none",j.style.display="",j.download=u+"."+s});let R=1;async function T(e){if(e.size<1e7)return e;const t=e.name,n=await B.compress(e,{quality:R,type:B.EImageType.JPEG,scale:1});return R-=.01,n.size>1e7?await T(new File([n],t,{type:"image/jpeg"})):(R=1,n)}function W(e){return new Promise((t=>{const n=new FileReader;n.onload=()=>{const e=n.result;"string"==typeof e&&t(e)},n.readAsDataURL(e)}))}async function X(e){return await W(e)}
